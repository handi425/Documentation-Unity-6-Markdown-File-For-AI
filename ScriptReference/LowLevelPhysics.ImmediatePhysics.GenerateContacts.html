<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-domain-script="6e91be4c-3145-4ea2-aa64-89d716064836" data-dLayer-ignore="true" data-document-language="true">
    </script>
    <script type="text/javascript">function OptanonWrapper() {}</script>
    <script>window.dataLayer = window.dataLayer || []; dataLayer.push({ event: 'dataLayer-initialized', user: { user_unity_id: undefined, user_logged_in: 'no' }, environment: { environment_locale: 'en-us', environment_currency: undefined }});</script>
    <script>var offline=(location.href.indexOf('docs.unity3d.com')==-1)?true:false;if(!offline){(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=   'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);  })(window,document,'script','dataLayer','GTM-5V25JL6');}</script>
    <link href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap" rel="stylesheet" />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Unity - Scripting API: LowLevelPhysics.ImmediatePhysics.GenerateContacts</title>
    <meta property="og:image" content="https://unity3d.com/files/images/ogimg.jpg" />
    <meta name="author" content="Unity Technologies" />
    <link rel="shortcut icon" href="https://unity.com/themes/contrib/unity_base/images/favicons/favicon.ico" />
    <link rel="icon" type="image/png" href="../../../StaticFiles/images/favicons/favicon.png" />
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFiles/images/favicons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFiles/images/favicons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" />
    <link rel="canonical" href="https://docs.unity3d.com/6000.0/Documentation/ScriptReference/LowLevelPhysics.ImmediatePhysics.GenerateContacts.html" />
    <meta name="msapplication-TileColor" content="#222c37" />
    <meta name="msapplication-TileImage" content="../StaticFiles/images/favicons/tileicon-144x144.png" />
    <script type="text/javascript" src="/StaticFilesConfig/UnityVersionsInfo.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/jquery.js">
    </script>
    <script type="text/javascript" src="docdata/toc.js">//toc</script>
    <!--local TOC-->
    <script type="text/javascript" src="docdata/global_toc.js">//toc</script>
    <!--global TOC, including other platforms-->
    <script type="text/javascript" src="../StaticFiles/js/core.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/prism.css" />
    <script type="text/javascript" src="../StaticFiles/js/prism.js">
    </script>
    <link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" />
    <script src="/StaticFilesConfig/feedback/feedback.js">
    </script>
    <script src="../StaticFiles/js/jquery.sidebar.min.js">
    </script>
    <script type="text/javascript" src="../StaticFiles/js/mobileoptimisation.js">
    </script>
    <link rel="stylesheet" href="../StaticFiles/css/mobileoptimisation.css" />
  </head>
  <body>
    <div id="DocsAnalyticsData" data-area="none" data-pagetype="scriptref">
    </div>
    <div class="header-wrapper">
      <div id="header" class="header">
        <div class="content">
          <div class="spacer">
            <div class="menu">
              <div id="nav-open" for="nav-input">
                <span>
                </span>
              </div>
              <div class="logo">
                <a href="">
                </a>
              </div>
              <div class="search-form">
                <form action="30_search.html" method="get" class="apisearch">
                  <input type="text" name="q" placeholder="Search scripting..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                  </input>
                  <input type="submit" class="submit">
                  </input>
                </form>
              </div>
              <ul>
                <li>
                  <a href="../Manual/index.html">Manual</a>
                </li>
                <li>
                  <a href="../ScriptReference/index.html" class="selected">Scripting API</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="more">
            <div class="filler">
            </div>
            <ul>
              <li>
                <a href="https://unity.com/">unity.com</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="toolbar">
        <div class="content clear">
          <div class="toggle version-number" id="VersionNumber" data-target=".otherversionscontent">
                                Version: <b>Unity 6</b> (6000.0)
                                <div class="otherversionscontent" id="OtherVersionsContent" style="display: none;"><ul id="OtherVersionsContentUl"></ul><div id="otherVersionsLegend"><ul><li><div id="supportedColour" class="legendBox"></div>Supported</li><li><div id="notFoundColour" class="legendBox"></div>Legacy</li></ul></div></div><div id="VersionSwitcherArrow" class="arrow versionSwitcherArrow"></div></div>
          <div class="lang-switcher hide">
            <div class="current toggle" data-target=".lang-list">
              <div class="lbl">Language<span class="b">English</span></div>
              <div class="arrow">
              </div>
            </div>
            <div class="lang-list" style="display:none;">
              <ul>
                <li>
                  <a href="">English</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="script-lang">
            <ul>
              <li class="selected" data-lang="CS">C#</li>
            </ul>
          </div>
          <div class="mobileLogo">
            <a href="https://docs.unity3d.com">
            </a>
          </div>
        </div>
      </div>
    </div>
    <div id="master-wrapper" class="master-wrapper clear">
      <div id="sidebar" class="sidebar">
        <div class="sidebar-wrap">
          <div class="content">
            <div class="sidebar-menu">
              <div class="toc" id="customScrollbar">
                <h2>Scripting API</h2>
                <div class="search-form sidebar-search-form">
                  <form action="30_search.html" method="get" class="apisearch">
                    <input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q">
                    </input>
                    <input type="submit" id="mobileSearchBtn" class="submit" value="Search">
                    </input>
                  </form>
                </div>
                <div class="toggle version-number sidebar-version-switcher" id="VersionNumber" data-target=".otherversionscontent">
                  <form id="otherVersionsContentMobileForm">
                    <div class="ui-field-contain">
                      <label for="select-native-4">Version: Unity 6</label>
                      <select name="select-native-4" id="versionsSelectMobile">
                        <option>Select a different version</option>
                        <optgroup id="versionsWithThisPageMobile" label="Versions with this page">
                        </optgroup>
                        <optgroup id="versionsWithoutThisPageMobile" label="Versions without this page">
                        </optgroup>
                      </select>
                    </div>
                  </form>
                </div>
                <div class="lang-switcher hide">
                  <div class="toggle" data-target=".lang-list">
                    <div class="lbl">Language<span class="b">English</span></div>
                    <div class="arrow">
                    </div>
                  </div>
                  <div class="lang-list" style="display:none;">
                    <ul>
                      <li>
                        <a href="">English</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="content-wrap" class="content-wrap">
        <div class="content-block">
          <div class="content">
            <div class="section">
              <div class="mb20 clear" id="">
                <h1 class="heading inherit">
                  <a href="LowLevelPhysics.ImmediatePhysics.html">ImmediatePhysics</a>.GenerateContacts</h1>
                <div class="clear">
                </div>
                <div class="scrollToFeedback">
                  <a id="scrollToFeedback">Leave feedback</a>
                </div>
                <div class="clear">
                </div>
                <div class="suggest">
                  <a class="blue-btn sbtn">Suggest a change</a>
                  <div class="suggest-wrap rel hide">
                    <div class="loading hide">
                      <div>
                      </div>
                      <div>
                      </div>
                      <div>
                      </div>
                    </div>
                    <div class="suggest-success hide">
                      <h2>Success!</h2>
                      <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-failed hide">
                      <h2>Submission failed</h2>
                      <p>For some reason your suggested change could not be submitted. Please &lt;a&gt;try again&lt;/a&gt; in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                      <a class="gray-btn sbtn close">Close</a>
                    </div>
                    <div class="suggest-form clear">
                      <label for="suggest_name">Your name</label>
                      <input id="suggest_name" type="text">
                      </input>
                      <label for="suggest_email">Your email</label>
                      <input id="suggest_email" type="email">
                      </input>
                      <label for="suggest_body" class="clear">Suggestion<span class="r">*</span></label>
                      <textarea id="suggest_body" class="req">
                      </textarea>
                      <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                      <p class="mb0">
                        <a class="cancel left lh42 cn">Cancel</a>
                      </p>
                    </div>
                  </div>
                </div>
                <a href="" class="switch-link gray-btn sbtn left hide">
                </a>
                <div class="clear">
                </div>
              </div>
              <div class="subsection">
                <div class="signature">
                  <div class="signature-CS sig-block">
                    <span style="color:red;">
                    </span>
                    <h2>Declaration</h2>public static int <span class="sig-kw">GenerateContacts</span>(ReadOnly&lt;GeometryHolder&gt; <span class="sig-kw">geom1</span>,
ReadOnly&lt;GeometryHolder&gt; <span class="sig-kw">geom2</span>,
ReadOnly&lt;ImmediateTransform&gt; <span class="sig-kw">xform1</span>,
ReadOnly&lt;ImmediateTransform&gt; <span class="sig-kw">xform2</span>,
int <span class="sig-kw">pairCount</span>,
NativeArray&lt;ImmediateContact&gt; <span class="sig-kw">outContacts</span>,
NativeArray&lt;int&gt; <span class="sig-kw">outContactCounts</span>,
float <span class="sig-kw">contactDistance</span>);
    </div>
                </div>
              </div>
              <div class="subsection">
                <h3>Parameters</h3>
                <table class="list">
                  <tr>
                    <td class="name lbl">geom1</td>
                    <td class="desc">The array that holds the first member of each pair of <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> objects with shapes assigned.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">geom2</td>
                    <td class="desc">The array that holds the second member of each pair of <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> objects with shapes assigned.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">xform1</td>
                    <td class="desc">The array that holds the first member of each pair of <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>s.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">xform2</td>
                    <td class="desc">The array that holds the second member of each pair of <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>s.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">pairCount</td>
                    <td class="desc">The number of pairs provided in the <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> and <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a> arrays.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">outContacts</td>
                    <td class="desc">The output array of contacts that were generated.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">outContactCounts</td>
                    <td class="desc">The output array of how many contacts were generated for each pair.</td>
                  </tr>
                  <tr>
                    <td class="name lbl">contactDistance</td>
                    <td class="desc">The distance at which contacts begin to be generated between the pairs.</td>
                  </tr>
                </table>
              </div>
              <div class="subsection">
                <h3>Returns</h3>
                <p>
                  <strong>int</strong>
        Returns the total number of contact points that were generated.
      </p>
              </div>
              <div class="subsection">
                <h3>Description</h3>
                <p>Generates the contact points for all the given pairs of shapes. Stores the resulting contacts in the <a href="LowLevelPhysics.ImmediateContact.html">ImmediateContact</a> array, and the number of contacts per each pair in the `outContactCounts` array.</p>
              </div>
              <div class="subsection">
        <p>This code sample defines how many pairs of objects PhysX should expect in the scene. You can set a specific number for a small contact check or, if you intend to run a more complex simulation, you might want to implement broadphase filtering to find out how many pairs of objects will interact. The easiest and least performant option is to put all the possible pairs of bodies into a GenerateContacts function that exists in the scene. This example shows a basic setup of manually adding two pairs of bodies and checking for contacts between them.</p>
      </div>
              <div class="subsection">
        <pre class="codeExampleCS">using System.Collections.Generic;
using UnityEngine;
using UnityEngine.LowLevelPhysics;
using Unity.Collections;<br /><br />public class ImmediatePhysics_GenerateContacts_Example : <a href="MonoBehaviour.html">MonoBehaviour</a>
{
    private int m_NumberOfPairs = 2;<br /><br />    // Pull in a reference from the <a href="Editor.html">Editor</a> to the <a href="Mesh.html">Mesh</a> <a href="Collider.html">Collider</a>.
    [<a href="SerializeField.html">SerializeField</a>]
    private <a href="MeshCollider.html">MeshCollider</a> m_Mesh;<br /><br />    List&lt;<a href="Vector3.html">Vector3</a>&gt; contactPoints = new List&lt;<a href="Vector3.html">Vector3</a>&gt;();<br /><br />    // There is no way to know how many contacts the shapes will generate,
    // so set a maximum value that should confidently fit all of them.
    int s_MaxContactCount = 100;<br /><br />    void Start()
    {
        // Create and set up geometry and transform arrays.
        NativeArray&lt;<a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a>&gt; geom1 = new NativeArray&lt;<a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a>&gt;(m_NumberOfPairs, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);
        NativeArray&lt;<a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a>&gt; geom2 = new NativeArray&lt;<a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a>&gt;(m_NumberOfPairs, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);<br /><br />        // Create a box shape that is 1 meter wide on each axis, and use that to construct a <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> object.
        <a href="LowLevelPhysics.BoxGeometry.html">BoxGeometry</a> boxShape = new <a href="LowLevelPhysics.BoxGeometry.html">BoxGeometry</a>(new <a href="Vector3.html">Vector3</a>(0.5f, 0.5f, 0.5f));
        <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> box = <a href="LowLevelPhysics.GeometryHolder.Create.html">GeometryHolder.Create</a>(boxShape);<br /><br />        // Get the geometry of an existing collider.
        <a href="LowLevelPhysics.GeometryHolder.html">GeometryHolder</a> convexMesh = m_Mesh.GeometryHolder;<br /><br />        NativeArray&lt;<a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>&gt; xForms1 = new NativeArray&lt;<a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>&gt;(m_NumberOfPairs, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);
        NativeArray&lt;<a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>&gt; xForms2 = new NativeArray&lt;<a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>&gt;(m_NumberOfPairs, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);<br /><br />        <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a> body1Transform = new <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>
        {
            <a href="UIElements.Position.html">Position</a> = new <a href="Vector3.html">Vector3</a>(0, 0, 0),
            Rotation = <a href="Quaternion-identity.html">Quaternion.identity</a>
        };<br /><br />        <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a> body2Transform = new <a href="LowLevelPhysics.ImmediateTransform.html">ImmediateTransform</a>
        {
            <a href="UIElements.Position.html">Position</a> = new <a href="Vector3.html">Vector3</a>(0, 0.75f, 0),
            Rotation = <a href="Quaternion.Euler.html">Quaternion.Euler</a>(new <a href="Vector3.html">Vector3</a>(45f, 0, 0))
        };<br /><br />
        // First pair is two boxes interacting.
        geom1[0] = box;
        geom2[0] = box;<br /><br />        xForms1[0] = body1Transform;
        xForms2[0] = body2Transform;<br /><br />        // Second pair is a box and a convex <a href="Mesh.html">Mesh</a> <a href="Collider.html">Collider</a>.
        geom1[1] = convexMesh;
        geom1[2] = box;<br /><br />        xForms1[1] = body1Transform;
        xForms2[1] = body2Transform;<br /><br />        // This code re-uses the same transforms, which means that if all the bodies
        // were part of the same simulation, they would all overlap with each other. However,
        // because we are only generating contacts per pair, one pair of bodies does not affect
        // the other pairs.<br /><br />        // Create a place to hold the output contacts and their counts per pair.
        // There is no way to know how many contacts the shapes will generate,
        // so set a maximum value that should confidently fit all of them.
        NativeArray&lt;<a href="LowLevelPhysics.ImmediateContact.html">ImmediateContact</a>&gt; contacts = new NativeArray&lt;<a href="LowLevelPhysics.ImmediateContact.html">ImmediateContact</a>&gt;(s_MaxContactCount, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);
        // The number of contactCounts is the same as the number of pairs.
        NativeArray&lt;int&gt; contactCounts = new NativeArray&lt;int&gt;(m_NumberOfPairs, <a href="Unity.Collections.Allocator.Temp.html">Allocator.Temp</a>);<br /><br />        // Finally, call the GenerateContacts function and put all the arrays in. 
        // Keep note of the <a href="Unity.Collections.NativeArray_1.ReadOnly.html">ReadOnly</a> status of the input arrays.<br /><br />        var totalContacts = <a href="LowLevelPhysics.ImmediatePhysics.GenerateContacts.html">ImmediatePhysics.GenerateContacts</a>(geom1.AsReadOnly(), geom2.AsReadOnly(), xForms1.AsReadOnly(), xForms2.AsReadOnly(), m_NumberOfPairs, contacts, contactCounts);<br /><br />        // It is now possible to check whether there were any contacts for the pairs.
        // First, iterate over the number of input pairs defined in m_NumberOfPairs.
        int idx = 0;
        for (int i = 0; i &lt; m_NumberOfPairs; i++)
        {
            // Iterate over the number of contacts that were generated per each pair.
            for (int j = 0; j &lt; contactCounts[i]; j++)
            {
                // Add the contact points to a list for visualization later.
                contactPoints.Add(contacts[idx].Point);<br /><br />                // The number of contact points per each pair can be variable, so
                // use a separate index to keep track of which contact to retrieve.
                idx++;
            }
        }
    }
}</pre>
      </div>
            </div>
            <div class="section">
              <div id="_content">
              </div>
            </div>
            <div class="footer-wrapper">
              <div class="footer clear">
                <div class="copy">
                  <p>
                    <known_issues>Is something described here not working as you expect it to? It might be a <b>Known Issue</b>. Please check with the Issue Tracker at </known_issues>
                    <a href="https://issuetracker.unity3d.com">issuetracker.unity3d.com</a>.</p>Copyright ©2005-2025 Unity Technologies. All rights reserved. Built from: 6000.0.36f1 (02b661dc617c). Built on: 2025-01-14.
                                        </div>
                <div class="menu">
                  <a href="https://unity3d.com/learn">Tutorials</a>
                  <a href="https://answers.unity3d.com">Community Answers</a>
                  <a href="https://support.unity3d.com/hc/en-us">Knowledge Base</a>
                  <a href="https://forum.unity3d.com">Forums</a>
                  <a href="https://unity3d.com/asset-store">Asset Store</a>
                  <a href="https://docs.unity3d.com/Manual/TermsOfUse.html">Terms of use</a>
                  <a href="https://unity.com/legal">Legal</a>
                  <a href="https://unity.com/legal/privacy-policy">Privacy Policy</a>
                  <a href="https://unity.com/legal/cookie-policy">Cookies</a>
                  <a href="https://unity.com/legal/do-not-sell-my-personal-information">Do Not Sell or Share My Personal Information</a>
                  <div id="ot-sdk-btn-container">
                    <a id="ot-sdk-btn" class="ot-sdk-show-settings" href="javascript:void(0);">Your Privacy Choices (Cookie Settings)</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>